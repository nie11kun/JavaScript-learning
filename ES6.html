<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script type="module">
    /*
    var a = 10;
    const b = "test";
    let c = true;
    

    if (true) {
        let a = 5;
    }
    alert(a);
    
    
    function varTest() {
        var x = 1;
        if (true) {
            var x = 2;
            console.log(x); // 2
        }
        console.log(x); // 2
    }

    function letTest() {
        let x = 3;
        if (true) {
            let x = 4;
            console.log(x); // 4
        }
        console.log(x); // 3
    }
    varTest();
    letTest();

    for (let index = 0; index < 3; index++) {
        
    }
    

   var name = "marco";
   var msg = `hello ${name}!`;
   console.log(msg);

   var a = 1;
   var b = 2;
   var msg = `sum is ${a + b}`;
   console.log(msg);
   

    let person = {
        name: "marco", age: 20,
        like: "basketball", height: 62,
        test() {
            alert("hi");
        }
    };
    person.test();

    let height = 160;
    let weight = 60;

    let man = {
        height,
        weight
    };

    let x = {a: 2, a: 3, a: 4};
    console.log(x.a);
    
    let name = "marco";
    let id = "123";
    let tel = "1300000";

    let user = {
        [name]: "tom",
        [`user_${id}`]: `${tel}`
    };
    console.log(user.user_123);

    let i = 0;

    let x = {
        ['foo' + ++i]: i,
        ['foo' + ++i]: i
    }
    console.log(x.foo1);
    console.log(x.foo2);

    var par = 'size';

    var config = {
        [par]: 1,
        ['mobile' + par.charAt(0).toUpperCase() + par.slice(1)]: 2
    }
    console.log(config.mobileSize);

    let user1 = {
        name: 'marco',
        age: 20,
        sex: 'male'
    }

    let user2 = {
        name: 'jim',
        age: 18,
        tel: '12345'
    }

    let newUser = Object.assign({}, user1, user2);
    console.log(newUser.name);
    console.log(newUser.tel);

    let person = {
        name: 'marco',
        age: 20
    };

    let newPerson = Object.assign({}, person, {name: 'john'});
    console.log(newPerson.name);
    console.log(person.name);
    

   let arr = [1, 2, 3];
   let [a, b, c] = arr;

   console.log(a);
   console.log(b);
   console.log(c);
   

    let a = () => {
        //return [1, 2, 3]
    };

    let [a, , c] = a();
    

   let a, b, c = 3, d = 4;

   [a, b = 2] = [1];
   [c, d] = [d, c];
   
   console.log(a);
   console.log(b);
   console.log(c);
   console.log(d);
   

   let obj = {h: 1, s: 2};
   let {h: a, s: b} = obj;

   console.log(a);
   console.log(b);

   let user = {name: "marco", id: 123};
   let {name = "tom", age = 20} = user;
   console.log(name);
   console.log(age);

   const test = (a, b, c, d) => {
        console.log(a + b + c + d);
    }
    var arr = [1, 2, 3];
    test(...arr, 4);

    let date = [2020, 11, 1];
    let x = new Date(...date);
    console.log(x.getFullYear());
    

    var arr = ["one", "two", "five"];
    arr.splice(2, 0, "three", "four");
    console.log(arr[3]);
    
    

    let newArr = ["three", "four"];
    let arr = ["one", "two", ...newArr, "five"];

    const obj1 = {
        a: 1,
        b: 2
    }
    const obj2 = {
        c: 3,
        d: 4
    }

    const merge = (...objs) => ({...objs});

    let newObj = merge(obj1, obj2);
    console.log(newObj);

    setTimeout(() => {
        console.log('second');
        setTimeout(() => {
            console.log('third');
        }, 3000);
    }, 3000);
    console.log('first');
    

    new Promise(function(resolve, reject) {
        if (success)
            resolve(result);
        else
            reject(Error('failure'));
    });
    

   const asyncTest = (work) => {
        return new Promise((resolve, reject) => {
            if (work === "")
                reject(Error('nothing'));
            setTimeout(() => {
                resolve(work);
            }, 3000);
        });
   };

   asyncTest('second')
   .then((result) => {
       console.log(result);
       return asyncTest('third');
   },
   (error) => console.log(error))
   .then((result) => console.log(result),
   (error) => console.log(error));

   console.log('frist');
   
   

    let myIterableObj = {
        [Symbol.iterator]: function* () {
            yield 1;
            yield 2;
            yield 3;
        }
    };
    console.log([...myIterableObj])
    

    function* id() {
        let index = 0;
        while (index < 5) {
            yield index++;
        }
    }
    let x = id();
    console.log(x.next().value);
    console.log(x.next().value);
    console.log(x.next().value);
    

    const arr = ['a', '1', '3', '5b', '9', 'f'];
    const myObj = {
        [Symbol.iterator]: function*() {
            for (const iterator of arr) {
                yield `${iterator}`;
            }
        }
    };

    const all = [...myObj]
    .map(i => parseInt(i, 10))
    .map(Math.sqrt)
    .filter(i => i < 5)
    .reduce((i, d) => i + d);
    console.log(all);
    */
   
    import * as math from './lib/math.js'
    console.log(math.sum(math.pi, math.pi));

    const asyncTest = (work) => {
        return new Promise((resolve, reject) => {
            if (work === "")
                reject(Error('nothing'));
            setTimeout(() => {
                resolve(work);
            }, 3000);
        });
   };

   asyncTest('second')
   .then(result => {
       console.log(result);
       return asyncTest('third');
   })
   .then(result => console.log(result))
   .catch(error => console.log(error))
   console.log('frist');

   const obj1 = {
       name: 'marco',
       age: 32
   }


   const choice = 'age';
   console.log(obj1[choice]);
</script>
</html>